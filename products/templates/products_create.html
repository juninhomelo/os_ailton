{% extends 'base.html' %}

{% block content %}

<div class="container mt-4">
    <h3 class="display-4">Cadastrar Produto</h3>
    <div class="card">
        <div class="card-body">
            <form method="post" class="form">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn btn-primary">Salvar</button>
            </form>
        </div>
    </div>
    <a href="{% url 'products' %}" class="btn btn-secondary mt-3">Cancelar</a>
</div>

{% endblock %}

{% block scripts %}

    <script>
        $('#id_price').mask('000.000.000.000.000,00', {reverse: true});

        $('.form').on('submit', function(event) {
            var priceField = $('#id_price');
            var formattedPrice = priceField.val().replace(/\./g, '').replace(',', '.');
            priceField.val(formattedPrice);
        });
    </script>

{% endblock %}
